{% extends '::layout.html.twig' %}
{% block title %}{{parent()}} - Accueil{% endblock %}

{% block file_arriane %}

{{sessionData.codeProfil}}

    {% if  isEleve(sessionData.codeProfil)  %}
     <div class="fond-fil-ariane-eleve-accueil" >
    {% elseif  isParentEleve(sessionData.codeProfil)  %}
      <div class="fond-fil-ariane-peleve-accueil" >  
    {% elseif  isEnseignant(sessionData.codeProfil)  %}
      <div class="fond-fil-ariane-ens-accueil" >  
    {% else  %}
          <div class="fond-fil-ariane-admin-accueil" >         
    {% endif  %}
         <div class="fond-fil-ariane" style="background:rgba(0,0,0,0.4); width: 100%; height : 0px;padding-top: 0px;color: #fff;" >
         <div class="row" style="background:rgba(0,0,0,0.3)">
            <div class="col-xs-7" >
                <h1> Accueil</h1>
            </div>
            <div class="col-xs-5" style="margin-top: 15px; ">
                <span class="fil-1"> Accueil</span> 
            </div>
        </div>
    </div>
</div>           
{% endblock  %}

{% block body %}
          

{% for contenu in app.session.getflashbag.get('classe.appel.error')%}
            {% if loop.index == 0%}

                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                    {% endif%}
                    <div class="text-center alert alert-danger fade in">{{contenu}}</div>
                                    {% if loop.index == 0%} 
                </div>

            {% endif%}
        {% endfor%}
         
{% for contenu in app.session.getflashbag.get('non.profil')%}
            {% if loop.index == 0%}

                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                    {% endif%}
                    <div class="text-center alert-danger fade in">{{contenu}}</div>
                                    {% if loop.index == 0%} 
                </div>

            {% endif%}
        {% endfor%}
  
        <div class="row" style="margin-top: 20px;">
        <div class="col-sm-6 col-lg-6">
            
               {% if  isEleve(sessionData.codeProfil)  %}
                    <div class="panel panel-white no-border no-radius groupe-form-eleve" >

               {% elseif  isParentEleve(sessionData.codeProfil)  %}
                     <div class="panel panel-white no-border no-radius groupe-form-peleve" >

               {% elseif  isEnseignant(sessionData.codeProfil)  %}
                    <div class="panel panel-white no-border no-radius groupe-form-enseignant" >
               {% else  %}
                      <div class="panel panel-white no-border no-radius groupe-form-admin" >

               {% endif  %}
                    <div class="panel-body no-padding">
                        <div class="space10 padding-15">
                            <h5 class="text-bold text-extra-small text-dark-transparent text-uppercase no-margin"><b>DERNIERRE CONNEXION :</b> <a href="{{path('app_admin_user_details_connexion', {'idUser' : sessionData.id, 'idConnexion': sessionData['idLastConnexion']})}}">{{sessionData['dateLastConnexion']|date('d/m/Y H:i:s')}} </a></h5><br/>
                            <h5 class="text-bold text-extra-small text-dark-transparent text-uppercase no-margin"><a href="{{path('app_admin_user_histo_connexion', {'idUser' : sessionData.id, 'isUser': 1})}}"><b>MES HISTORIQUES DE CONNEXIONS </b> </a> </h5>
                            <h5 class="text-bold text-extra-small text-dark-transparent text-uppercase no-margin"> </h5>
                            <div class="block margin-top-15 margin-bottom-10 text-purple">
                                <span class="counter ng-scope" count-to="179" value="0" duration="1" filter="number">
                                    
                                </span>
                            </div>
                            
                        </div>
                        <div class="padding-bottom-20" >
                            {#<div value="77" type="purple" class="progress-xs no-radius background-dark no-margin progress ng-isolate-scope">
                                <div style="width: 100%;" class="progress-bar progress-bar-purple" ng-class="type &amp;&amp; 'progress-bar-' + type" role="progressbar" aria-valuenow="77" aria-valuemin="0" aria-valuemax="100" ng-style="{width: (percent < 100 ? percent : 100) + '%'}" aria-valuetext="77%" aria-labelledby="progressbar" ng-transclude=""></div>
                            </div>#}
                        </div>
                    </div>
                </div>
            </div>            
          
            <div class="col-sm-6 col-lg-6">
                {% if  isEleve(sessionData.codeProfil)  %}
                    <div class="panel panel-white no-border no-radius groupe-form-eleve" >

               {% elseif  isParentEleve(sessionData.codeProfil)  %}
                     <div class="panel panel-white no-border no-radius groupe-form-peleve" >

               {% elseif  isEnseignant(sessionData.codeProfil)  %}
                    <div class="panel panel-white no-border no-radius groupe-form-enseignant" >
               {% else  %}
                      <div class="panel panel-white no-border no-radius groupe-form-admin" >

               {% endif  %}  <div class="panel-body no-padding">
                        <div class="space10 padding-15">
                         {#   <h5 class="text-bold text-extra-small text-dark-transparent text-uppercase no-margin">NOMBRE ELEVE : </h5><br/>
                            <h5 class="text-bold text-extra-small text-dark-transparent text-uppercase no-margin">NOMBRE ENSEIGNENT : </h5>
                            #}
                   {#         <span class="label partition-red text-white margin-top-10 margin-right-5">{%if nbretotal[2] is defined %}{{nbretotal[2]}} {%else%} 0 {%endif%} %</span><span class="text-extra-small">{#En cours</span>
                   #}   
                        </div>
                        <div class="padding-bottom-20">
                            {#<div value="46" type="green" class="progress-xs no-radius background-dark no-margin progress ng-isolate-scope">
                                <div style="width: 100%;" class="progress-bar progress-bar-green" ng-class="type &amp;&amp; 'progress-bar-' + type" role="progressbar" aria-valuenow="46" aria-valuemin="0" aria-valuemax="100" ng-style="{width: (percent < 100 ? percent : 100) + '%'}" aria-valuetext="46%" aria-labelledby="progressbar" ng-transclude=""></div>
                            </div>#}
                        </div>
                    </div>
                </div>
            </div>
           
             <div class="col-sm-12 col-lg-12" style="margin-top: 20px;">
                {% if  isEleve(sessionData.codeProfil)  %}
                    <div class="panel panel-white no-border no-radius groupe-form-eleve" >

               {% elseif  isParentEleve(sessionData.codeProfil)  %}
                     <div class="panel panel-white no-border no-radius groupe-form-peleve" >

               {% elseif  isEnseignant(sessionData.codeProfil)  %}
                    <div class="panel panel-white no-border no-radius groupe-form-enseignant" >
               {% else  %}
                      <div class="panel panel-white no-border no-radius groupe-form-admin" >

               {% endif  %} <div class="panel-body no-padding">
                        <div class="space10 padding-15" style="text-align:center;">
                            <h5 class="text-bold text-extra-small text-dark-transparent text-uppercase no-margin">
                                
                                {% if  isEleve(sessionData.codeProfil)  %}
                                    <a href='{{path("app_admin_eleve_infos")}}' > Mon profil </a> * 
                                    <a href='{{path("app_admin_classe_ajout_info_note_eleve",{'idEleve':sessionData.id})}}' > Notes </a> * 
                                    <a href='{{path("app_admin_eleve_infos",{'idEleve':sessionData.id})}}' > Bulletins </a> * 
                                    <a href='{{path("app_admin_epreuves")}}' > Exercices </a> * 
                                    <a href='{{path("app_admin_eleve_infos")}}' > Présences </a> * 
                                    <a href='{{path("app_admin_eleve_infos")}}' > Situation Financiere </a> * 
                                    <a href='{{path("app_admin_eleve_infos")}}' > Actualités </a>
               
                               {% elseif  isParentEleve(sessionData.codeProfil)  %}
                                 
                               {% elseif  isEnseignant(sessionData.codeProfil)  %}
                                   <a href='{{path("app_admin_user_mon_profil")}}' > Mon profil </a> * 
                                    <a href='{{path("app_admin_classes")}}' > Classe </a> * 
                                    <a href='{{path("app_admin_articles_list")}}' > Cms </a>  
                                    

                               {% else  %}
                                  
                                <a href="{{path('app_admin_user_histo_connexion', {'idUser' : sessionData.id, 'isUser': 1})}}">Mon profil</a> *  
                                <a href="{{path("app_admin_eleves")}}">Elève</a> * 
                                <a href='{{path("app_admin_users")}}'>Enseignant</a> * 
                                 
                                <a href="{{path('app_admin_classes')}}" >Classe</a> *
                                <a href='{{path("app_admin_templates")}}' > Template </a> *
                                <a href='{{path("app_messagerie_boite_reception")}}' > Boite de reception </a> 
								{% if sessionData.siAdminGeneral %}
									* <a href="{{path('app_admin_profil_droits', {'idProfil': sessionData.idProfil})}}" > Droits </a>
								{% endif  %}	
                               {% endif  %}
                                
                            </h5><br/>
                           
                   {#         <span class="label partition-red text-white margin-top-10 margin-right-5">{%if nbretotal[2] is defined %}{{nbretotal[2]}} {%else%} 0 {%endif%} %</span><span class="text-extra-small">{#En cours</span>
                   #}   
                        </div>
                      
                    </div>
                </div>
            </div>
                         <div class="col-sm-12 col-lg-12" style="margin-top: 20px;">
                {% if  isEleve(sessionData.codeProfil)  %}
                    <div class="panel panel-white no-border no-radius groupe-form-eleve" >

               {% elseif  isParentEleve(sessionData.codeProfil)  %}
                     <div class="panel panel-white no-border no-radius groupe-form-peleve" >

               {% elseif  isEnseignant(sessionData.codeProfil)  %}
                    <div class="panel panel-white no-border no-radius groupe-form-enseignant" >
               {% else  %}
                      <div class="panel panel-white no-border no-radius groupe-form-admin" >

               {% endif  %}  <div class="panel-body no-padding">
                        <div class="space10 padding-15">
                            <div style="height: 30px; ">Dernier(s) article(s)</div>
                             <table class="table table-striped table-advance table-hover">
                            <tbody>
                                <tr class="label-info ">
                                  
                                    <th>Titre</th>
                                    <th>Description</th>
                                    
                                </tr>

                                {% for unArticle in sessionData.tabArticle%}
                                    <tr>
                                        <td>
                                           {{unArticle['titre']}}
                                        </td>
                                        <td></td>
                                        
                                        
                                    </tr>
                                {% endfor %}


                            </tbody>
                        </table>
                            
                            
                                       
                        </div>
                     
                   
                    </div>
                </div>
            </div>           
                        
        </div>
        </div>
        </div>
        
  
  
{% endblock %}

{% block scripts %}
    {{parent()}}

    <script>
        $(document).ready(function () {

            $("#chart-container").highcharts({
			
                chart: {
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false,
                    type: 'pie'
                },
                title: {
                    text: ''
                },
                tooltip: {
                    pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer'
                        {#dataLabels: {
                            enabled: true,
                            format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                            style: {
                                color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                            }
                        }#}
                    }
                },
                series: [{
                        name: 'Brands',
                        colorByPoint: true,
                        data: [
							{%if integrfic is defined%}
								{% for i in integrfic %}
									{# write a comma to separate elements unless it is first one... #}
									{% if loop.index0 != 0 %},{% endif %}								
									{
										name:"{{i.cle}}", 	
										y:{{i.valeur}}				
									}
								{% endfor %}
							{% endif %}
						]
                    }]
            });
        });

    </script>

{% endblock %}
